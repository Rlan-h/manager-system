import{e as j,j as N,u as K,J as i,k as p,l as w,v as u,p as M,n as c,m as t,z as B,A as m,D as n,Q as A,U as V,P as x,s as I,x as S,T as H,_ as q,y as U,f as R,ap as Q,aq as X,ar as Y,as as Z,a as ee,aa as W,t as O,a5 as te,H as D,M as se,R as ae,q as T}from"./index-80719af3.js";import{E as oe,a as le}from"./el-tag-429f8176.js";import"./el-checkbox-15b2b38d.js";import"./el-tooltip-43245aa6.js";import{d as re,c as ne,E as ie}from"./el-button-1f086a43.js";import{h as ce}from"./request-54650ec0.js";import"./event-d86b9218.js";const ue=j({type:{type:String,values:["success","info","warning","danger",""],default:""},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:{type:String,default:""},size:{type:String,values:re,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),pe={close:f=>f instanceof MouseEvent,click:f=>f instanceof MouseEvent},fe=N({name:"ElTag"}),de=N({...fe,props:ue,emits:pe,setup(f,{emit:s}){const g=f,r=ne(),a=K("tag"),y=i(()=>{const{type:l,hit:v,effect:k,closable:h,round:_}=g;return[a.b(),a.is("closable",h),a.m(l),a.m(r.value),a.m(k),a.is("hit",v),a.is("round",_)]}),C=l=>{s("close",l)},o=l=>{s("click",l)};return(l,v)=>l.disableTransitions?(p(),w("span",{key:0,class:c(t(y)),style:S({backgroundColor:l.color}),onClick:o},[u("span",{class:c(t(a).e("content"))},[M(l.$slots,"default")],2),l.closable?(p(),B(t(x),{key:0,class:c(t(a).e("close")),onClick:V(C,["stop"])},{default:m(()=>[n(t(A))]),_:1},8,["class","onClick"])):I("v-if",!0)],6)):(p(),B(H,{key:1,name:`${t(a).namespace.value}-zoom-in-center`,appear:""},{default:m(()=>[u("span",{class:c(t(y)),style:S({backgroundColor:l.color}),onClick:o},[u("span",{class:c(t(a).e("content"))},[M(l.$slots,"default")],2),l.closable?(p(),B(t(x),{key:0,class:c(t(a).e("close")),onClick:V(C,["stop"])},{default:m(()=>[n(t(A))]),_:1},8,["class","onClick"])):I("v-if",!0)],6)]),_:3},8,["name"]))}});var me=q(de,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const ve=U(me),ge=j({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:f=>f>=0&&f<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:R(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:R([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:R(Function),default:f=>`${f}%`}}),ye=["aria-valuenow"],he={viewBox:"0 0 100 100"},ke=["d","stroke","stroke-linecap","stroke-width"],_e=["d","stroke","opacity","stroke-linecap","stroke-width"],be={key:0},$e=N({name:"ElProgress"}),we=N({...$e,props:ge,setup(f){const s=f,g={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=K("progress"),a=i(()=>({width:`${s.percentage}%`,animationDuration:`${s.duration}s`,backgroundColor:J(s.percentage)})),y=i(()=>(s.strokeWidth/s.width*100).toFixed(1)),C=i(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(y.value)/2}`,10):0),o=i(()=>{const e=C.value,b=s.type==="dashboard";return`
          M 50 50
          m 0 ${b?"":"-"}${e}
          a ${e} ${e} 0 1 1 0 ${b?"-":""}${e*2}
          a ${e} ${e} 0 1 1 0 ${b?"":"-"}${e*2}
          `}),l=i(()=>2*Math.PI*C.value),v=i(()=>s.type==="dashboard"?.75:1),k=i(()=>`${-1*l.value*(1-v.value)/2}px`),h=i(()=>({strokeDasharray:`${l.value*v.value}px, ${l.value}px`,strokeDashoffset:k.value})),_=i(()=>({strokeDasharray:`${l.value*v.value*(s.percentage/100)}px, ${l.value}px`,strokeDashoffset:k.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),F=i(()=>{let e;return s.color?e=J(s.percentage):e=g[s.status]||g.default,e}),L=i(()=>s.status==="warning"?Q:s.type==="line"?s.status==="success"?X:Y:s.status==="success"?Z:A),z=i(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),d=i(()=>s.format(s.percentage));function G(e){const b=100/e.length;return e.map(($,E)=>W($)?{color:$,percentage:(E+1)*b}:$).sort(($,E)=>$.percentage-E.percentage)}const J=e=>{var b;const{color:P}=s;if(ee(P))return P(e);if(W(P))return P;{const $=G(P);for(const E of $)if(E.percentage>e)return E.color;return(b=$[$.length-1])==null?void 0:b.color}};return(e,b)=>(p(),w("div",{class:c([t(r).b(),t(r).m(e.type),t(r).is(e.status),{[t(r).m("without-text")]:!e.showText,[t(r).m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[e.type==="line"?(p(),w("div",{key:0,class:c(t(r).b("bar"))},[u("div",{class:c(t(r).be("bar","outer")),style:S({height:`${e.strokeWidth}px`})},[u("div",{class:c([t(r).be("bar","inner"),{[t(r).bem("bar","inner","indeterminate")]:e.indeterminate},{[t(r).bem("bar","inner","striped")]:e.striped},{[t(r).bem("bar","inner","striped-flow")]:e.stripedFlow}]),style:S(t(a))},[(e.showText||e.$slots.default)&&e.textInside?(p(),w("div",{key:0,class:c(t(r).be("bar","innerText"))},[M(e.$slots,"default",{percentage:e.percentage},()=>[u("span",null,O(t(d)),1)])],2)):I("v-if",!0)],6)],6)],2)):(p(),w("div",{key:1,class:c(t(r).b("circle")),style:S({height:`${e.width}px`,width:`${e.width}px`})},[(p(),w("svg",he,[u("path",{class:c(t(r).be("circle","track")),d:t(o),stroke:`var(${t(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":e.strokeLinecap,"stroke-width":t(y),fill:"none",style:S(t(h))},null,14,ke),u("path",{class:c(t(r).be("circle","path")),d:t(o),stroke:t(F),fill:"none",opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":t(y),style:S(t(_))},null,14,_e)]))],6)),(e.showText||e.$slots.default)&&!e.textInside?(p(),w("div",{key:2,class:c(t(r).e("text")),style:S({fontSize:`${t(z)}px`})},[M(e.$slots,"default",{percentage:e.percentage},()=>[e.status?(p(),B(t(x),{key:1},{default:m(()=>[(p(),B(te(t(L))))]),_:1})):(p(),w("span",be,O(t(d)),1))])],6)):I("v-if",!0)],10,ye))}});var Se=q(we,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Ce=U(Se);const Te=u("div",{class:"el-upload__text"},[T(" Drop file here or "),u("em",null,"click to upload")],-1),Pe={class:"mt-2"},Ee={class:"mt-2 flex gap-x-3"},Oe=N({__name:"fileupload",setup(f){const s=D(),g=D(),r=D(),a=D([]),y=i(()=>{let o=0;for(const l of a.value)o+=l.size;return o}),C=async()=>{console.log(a.value),console.log(typeof s.value.files[0]),await ce({method:"POST",url:"http://localhost:3000/upload/multiple",data:{filse:s.value.files},headers:{"Content-Type":"multipart/form-data"}})};return se(()=>{r.value.ondragenter=o=>{o.preventDefault()},r.value.ondragover=o=>{o.preventDefault()},r.value.ondrop=o=>{o.preventDefault();for(const l of o.dataTransfer.items){const v=l.webkitGetAsEntry();v.isDirectory?v.createReader().readEntries(h=>{console.log(h),a.value.splice(0),a.value.push(...h)}):v.file(k=>{a.value.splice(0),a.value.push(k)})}},r.value.addEventListener("click",()=>{s.value.click()}),s.value.addEventListener("change",()=>{if(a.value.length===0)for(const o of s.value.files)o.progressPercent=0,a.value.push(o);else for(const o of s.value.files)JSON.stringify(a.value).indexOf(JSON.stringify(o))===-1&&(o.progressPercent=0,a.value.push(o))}),g.value.addEventListener("change",()=>{if(console.log(g.value.files),a.value.length===0)for(const o of g.value.files)o.progressPercent=0,a.value.push(o);else for(const o of g.value.files)JSON.stringify(a.value).indexOf(JSON.stringify(o))===-1&&(o.progressPercent=0,a.value.push(o))})}),(o,l)=>{const v=ae("upload-filled"),k=x,h=ie,_=oe,F=Ce,L=le,z=ve;return p(),w("div",null,[u("div",{class:"w-full h-72 border bg-white flex flex-col justify-center items-center hover:border-2",ref_key:"fileContainer",ref:r},[u("input",{style:{display:"none"},type:"file",ref_key:"fileRef",ref:s,multiple:"",accept:"image/png, image/jpeg"},null,512),u("input",{style:{display:"none"},type:"file",ref_key:"folderRef",ref:g,webkitdirectory:"",mozdirectory:"",odirectory:""},null,512),n(k,{class:"el-icon--upload",size:"100",color:"#c9c9c9"},{default:m(()=>[n(v)]),_:1}),Te],512),u("div",Pe,[n(h,{type:"primary",onClick:l[0]||(l[0]=d=>s.value.click())},{default:m(()=>[T("选择文件")]),_:1}),n(h,{type:"primary",onClick:l[1]||(l[1]=d=>g.value.click())},{default:m(()=>[T("选择文件夹")]),_:1})]),n(L,{class:"mt-2 border",data:a.value},{default:m(()=>[n(_,{prop:"name",label:"文件名",fit:""}),n(_,{prop:"type",label:"类型",fit:""}),n(_,{prop:"filename",label:"大小",fit:"",formatter:d=>d.size>1e6?d.size/1e6+"M":d.size/1e3+"KB"},null,8,["formatter"]),n(_,{prop:"filename",label:"状态",fit:""},{default:m(d=>[n(F,{percentage:d.row.progressPercent},null,8,["percentage"])]),_:1}),n(_,{prop:"filename",label:"操作",fit:""})]),_:1},8,["data"]),u("div",Ee,[n(z,{type:"info"},{default:m(()=>{var d;return[T("文件数量："+O((d=a.value)==null?void 0:d.length),1)]}),_:1}),n(z,{type:"success"},{default:m(()=>[T("成功上传：")]),_:1}),n(z,{type:"info"},{default:m(()=>[T("总大小："+O(y.value>1e6?y.value/1e6+"M":y.value/1e3+"KB"),1)]),_:1})]),n(h,{class:"mt-2",type:"primary",onClick:C},{default:m(()=>[T("开始上传")]),_:1})])}}});export{Oe as default};
