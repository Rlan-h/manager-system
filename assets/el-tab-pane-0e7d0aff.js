import{l as Ce,t as F,a as re,s as he,v as Ae,E as V,U as ie}from"./event-d86b9218.js";import{aT as we,av as J,aU as Z,an as $e,e as U,f as ee,j as D,G as H,Y as te,u as K,H as h,w as k,L as ae,k as ce,l as ue,n as de,m as B,x as ge,_ as be,J as M,M as ve,aA as Re,D as f,P as I,aV as Be,a8 as Oe,Q as xe,X as ke,aW as Le,p as fe,aF as ne,aa as Pe,aC as De,aN as Me,aX as oe,a9 as ze,aB as Ve,S as Ie,V as Ye,s as Ue,y as He,a7 as Ke}from"./index-80719af3.js";import{b as Ge}from"./el-button-1f086a43.js";function bt(){if(!arguments.length)return[];var e=arguments[0];return Ce(e)?e:[e]}const x=e=>we(e);var Xe=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Xe||{});const Y=e=>{const a=J(e)?e:[e],r=[];return a.forEach(u=>{var i;J(u)?r.push(...Y(u)):Z(u)&&J(u.children)?r.push(...Y(u.children)):(r.push(u),Z(u)&&((i=u.component)!=null&&i.subTree)&&r.push(...Y(u.component.subTree)))}),r},me=e=>e,We=(e,a,r)=>Y(e.subTree).filter(t=>{var o;return Z(t)&&((o=t.type)==null?void 0:o.name)===a&&!!t.component}).map(t=>t.component.uid).map(t=>r[t]).filter(t=>!!t),je=(e,a)=>{const r={},u=$e([]);return{children:u,addChild:o=>{r[o.uid]=o,u.value=We(e,a,r)},removeChild:o=>{delete r[o],u.value=u.value.filter($=>$.uid!==o)}}},G=Symbol("tabsRootContextKey"),qe=U({tabs:{type:ee(Array),default:()=>me([])}}),pe="ElTabBar",Je=D({name:pe}),Qe=D({...Je,props:qe,setup(e,{expose:a}){const r=e,u=H(),i=te(G);i||F(pe,"<el-tabs><el-tab-bar /></el-tabs>");const t=K("tabs"),o=h(),$=h(),b=()=>{let m=0,p=0;const v=["top","bottom"].includes(i.props.tabPosition)?"width":"height",l=v==="width"?"x":"y",O=l==="x"?"left":"top";return r.tabs.every(g=>{var w,s;const _=(s=(w=u.parent)==null?void 0:w.refs)==null?void 0:s[`tab-${g.uid}`];if(!_)return!1;if(!g.active)return!0;m=_[`offset${x(O)}`],p=_[`client${x(v)}`];const y=window.getComputedStyle(_);return v==="width"&&(r.tabs.length>1&&(p-=Number.parseFloat(y.paddingLeft)+Number.parseFloat(y.paddingRight)),m+=Number.parseFloat(y.paddingLeft)),!1}),{[v]:`${p}px`,transform:`translate${x(l)}(${m}px)`}},E=()=>$.value=b();return k(()=>r.tabs,async()=>{await ae(),E()},{immediate:!0}),re(o,()=>E()),a({ref:o,update:E}),(m,p)=>(ce(),ue("div",{ref_key:"barRef",ref:o,class:de([B(t).e("active-bar"),B(t).is(B(i).props.tabPosition)]),style:ge($.value)},null,6))}});var Ze=be(Qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const Fe=U({panes:{type:ee(Array),default:()=>me([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),et={tabClick:(e,a,r)=>r instanceof Event,tabRemove:(e,a)=>a instanceof Event},le="ElTabNav",tt=D({name:le,props:Fe,emits:et,setup(e,{expose:a,emit:r}){const u=H(),i=te(G);i||F(le,"<el-tabs><tab-nav /></el-tabs>");const t=K("tabs"),o=he(),$=Ae(),b=h(),E=h(),m=h(),p=h(),v=h(!1),l=h(0),O=h(!1),g=h(!0),w=M(()=>["top","bottom"].includes(i.props.tabPosition)?"width":"height"),s=M(()=>({transform:`translate${w.value==="width"?"X":"Y"}(-${l.value}px)`})),_=()=>{if(!b.value)return;const c=b.value[`offset${x(w.value)}`],d=l.value;if(!d)return;const n=d>c?d-c:0;l.value=n},y=()=>{if(!b.value||!E.value)return;const c=E.value[`offset${x(w.value)}`],d=b.value[`offset${x(w.value)}`],n=l.value;if(c-n<=d)return;const S=c-n>d*2?n+d:c-d;l.value=S},L=async()=>{const c=E.value;if(!v.value||!m.value||!b.value||!c)return;await ae();const d=m.value.querySelector(".is-active");if(!d)return;const n=b.value,S=["top","bottom"].includes(i.props.tabPosition),C=d.getBoundingClientRect(),N=n.getBoundingClientRect(),R=S?c.offsetWidth-N.width:c.offsetHeight-N.height,A=l.value;let T=A;S?(C.left<N.left&&(T=A-(N.left-C.left)),C.right>N.right&&(T=A+C.right-N.right)):(C.top<N.top&&(T=A-(N.top-C.top)),C.bottom>N.bottom&&(T=A+(C.bottom-N.bottom))),T=Math.max(T,0),l.value=Math.min(T,R)},z=()=>{var c;if(!E.value||!b.value)return;e.stretch&&((c=p.value)==null||c.update());const d=E.value[`offset${x(w.value)}`],n=b.value[`offset${x(w.value)}`],S=l.value;n<d?(v.value=v.value||{},v.value.prev=S,v.value.next=S+n<d,d-S<n&&(l.value=d-n)):(v.value=!1,S>0&&(l.value=0))},Ee=c=>{const d=c.code,{up:n,down:S,left:C,right:N}=V;if(![n,S,C,N].includes(d))return;const R=Array.from(c.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),A=R.indexOf(c.target);let T;d===C||d===n?A===0?T=R.length-1:T=A-1:A<R.length-1?T=A+1:T=0,R[T].focus({preventScroll:!0}),R[T].click(),se()},se=()=>{g.value&&(O.value=!0)},X=()=>O.value=!1;return k(o,c=>{c==="hidden"?g.value=!1:c==="visible"&&setTimeout(()=>g.value=!0,50)}),k($,c=>{c?setTimeout(()=>g.value=!0,50):g.value=!1}),re(m,z),ve(()=>setTimeout(()=>L(),0)),Re(()=>z()),a({scrollToActiveTab:L,removeFocus:X}),k(()=>e.panes,()=>u.update(),{flush:"post",deep:!0}),()=>{const c=v.value?[f("span",{class:[t.e("nav-prev"),t.is("disabled",!v.value.prev)],onClick:_},[f(I,null,{default:()=>[f(Be,null,null)]})]),f("span",{class:[t.e("nav-next"),t.is("disabled",!v.value.next)],onClick:y},[f(I,null,{default:()=>[f(Oe,null,null)]})])]:null,d=e.panes.map((n,S)=>{var C,N,R,A;const T=n.uid,W=n.props.disabled,j=(N=(C=n.props.name)!=null?C:n.index)!=null?N:`${S}`,q=!W&&(n.isClosable||e.editable);n.index=`${S}`;const Ne=q?f(I,{class:"is-icon-close",onClick:P=>r("tabRemove",n,P)},{default:()=>[f(xe,null,null)]}):null,ye=((A=(R=n.slots).label)==null?void 0:A.call(R))||n.props.label,Se=!W&&n.active?0:-1;return f("div",{ref:`tab-${T}`,class:[t.e("item"),t.is(i.props.tabPosition),t.is("active",n.active),t.is("disabled",W),t.is("closable",q),t.is("focus",O.value)],id:`tab-${j}`,key:`tab-${T}`,"aria-controls":`pane-${j}`,role:"tab","aria-selected":n.active,tabindex:Se,onFocus:()=>se(),onBlur:()=>X(),onClick:P=>{X(),r("tabClick",n,j,P)},onKeydown:P=>{q&&(P.code===V.delete||P.code===V.backspace)&&r("tabRemove",n,P)}},[ye,Ne])});return f("div",{ref:m,class:[t.e("nav-wrap"),t.is("scrollable",!!v.value),t.is(i.props.tabPosition)]},[c,f("div",{class:t.e("nav-scroll"),ref:b},[f("div",{class:[t.e("nav"),t.is(i.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(i.props.tabPosition))],ref:E,style:s.value,role:"tablist",onKeydown:Ee},[e.type?null:f(Ze,{ref:p,tabs:[...e.panes]},null),d])])])}}}),at=U({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ee(Function),default:()=>!0},stretch:Boolean}),Q=e=>Pe(e)||De(e),st={[ie]:e=>Q(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>Q(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>Q(e),tabAdd:()=>!0};var nt=D({name:"ElTabs",props:at,emits:st,setup(e,{emit:a,slots:r,expose:u}){var i,t;const o=K("tabs"),{children:$,addChild:b,removeChild:E}=je(H(),"ElTabPane"),m=h(),p=h((t=(i=e.modelValue)!=null?i:e.activeName)!=null?t:"0"),v=s=>{p.value=s,a(ie,s),a("tabChange",s)},l=async s=>{var _,y,L;if(!(p.value===s||ne(s)))try{await((_=e.beforeLeave)==null?void 0:_.call(e,s,p.value))!==!1&&(v(s),(L=(y=m.value)==null?void 0:y.removeFocus)==null||L.call(y))}catch{}},O=(s,_,y)=>{s.props.disabled||(l(_),a("tabClick",s,y))},g=(s,_)=>{s.props.disabled||ne(s.props.name)||(_.stopPropagation(),a("edit",s.props.name,"remove"),a("tabRemove",s.props.name))},w=()=>{a("edit",void 0,"add"),a("tabAdd")};return Ge({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},M(()=>!!e.activeName)),k(()=>e.activeName,s=>l(s)),k(()=>e.modelValue,s=>l(s)),k(p,async()=>{var s;await ae(),(s=m.value)==null||s.scrollToActiveTab()}),ke(G,{props:e,currentName:p,registerPane:b,unregisterPane:E}),u({currentName:p}),()=>{const s=e.editable||e.addable?f("span",{class:o.e("new-tab"),tabindex:"0",onClick:w,onKeydown:L=>{L.code===V.enter&&w()}},[f(I,{class:o.is("icon-plus")},{default:()=>[f(Le,null,null)]})]):null,_=f("div",{class:[o.e("header"),o.is(e.tabPosition)]},[s,f(tt,{ref:m,currentName:p.value,editable:e.editable,type:e.type,panes:$.value,stretch:e.stretch,onTabClick:O,onTabRemove:g},null)]),y=f("div",{class:o.e("content")},[fe(r,"default")]);return f("div",{class:[o.b(),o.m(e.tabPosition),{[o.m("card")]:e.type==="card",[o.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[_,y]:[y,_]])}}});const ot=U({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),lt=["id","aria-hidden","aria-labelledby"],Te="ElTabPane",rt=D({name:Te}),it=D({...rt,props:ot,setup(e){const a=e,r=H(),u=Me(),i=te(G);i||F(Te,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const t=K("tab-pane"),o=h(),$=M(()=>a.closable||i.props.closable),b=oe(()=>{var l;return i.currentName.value===((l=a.name)!=null?l:o.value)}),E=h(b.value),m=M(()=>{var l;return(l=a.name)!=null?l:o.value}),p=oe(()=>!a.lazy||E.value||b.value);k(b,l=>{l&&(E.value=!0)});const v=ze({uid:r.uid,slots:u,props:a,paneName:m,active:b,index:o,isClosable:$});return ve(()=>{i.registerPane(v)}),Ve(()=>{i.unregisterPane(v.uid)}),(l,O)=>B(p)?Ie((ce(),ue("div",{key:0,id:`pane-${B(m)}`,class:de(B(t).b()),role:"tabpanel","aria-hidden":!B(b),"aria-labelledby":`tab-${B(m)}`},[fe(l.$slots,"default")],10,lt)),[[Ye,B(b)]]):Ue("v-if",!0)}});var _e=be(it,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const vt=He(nt,{TabPane:_e}),ft=Ke(_e);export{ft as E,Xe as P,vt as a,bt as c,Y as f,me as m};
